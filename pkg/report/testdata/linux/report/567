TITLE: BUG: unable to handle kernel NULL pointer dereference in vhci_shutdown_connection
ALT: bad-access in vhci_shutdown_connection
TYPE: NULL-POINTER-DEREFERENCE
PANICKED: Y

[  775.896747][ T5109] 8<--- cut here ---
[  775.897679][ T5109] Unable to handle kernel NULL pointer dereference at virtual address 00000004
[  775.898343][ T5109] pgd = bc31cbac
[  775.899787][ T5109] [00000004] *pgd=00000000
[  775.902278][ T5109] Internal error: Oops: 5 [#1] PREEMPT SMP ARM
[  775.904948][ T5109] Dumping ftrace buffer:
[  775.906045][ T5109]    (ftrace buffer empty)
[  775.907120][ T5109] Modules linked in:
[  775.907741][ T5109] CPU: 0 PID: 5109 Comm: kworker/u4:3 Not tainted 5.10.0-rc1+ #20
[  775.908314][ T5109] Hardware name: ARM-Versatile Express
[  775.909515][ T5109] Workqueue: usbip_event event_handler
[  775.910105][ T5109] PC is at kthread_stop+0x60/0x524
[  775.910350][ T5109] LR is at __this_cpu_preempt_check+0x1c/0x20
[  775.910621][ T5109] pc : [<80165504>]    lr : [<825e31d8>]    psr: 60010013
[  775.911939][ T5109] sp : 8a895e48  ip : 8a895df8  fp : 8a895e64
[  775.912315][ T5109] r10: 84a90360  r9 : 82fe5410  r8 : 00000100
[  775.912630][ T5109] r7 : 83675be0  r6 : 8344ec98  r5 : 00000004  r4 : fffffffc
[  775.913034][ T5109] r3 : 00000000  r2 : 00000000  r1 : 5b1fa000  r0 : 00000001
[  775.913476][ T5109] Flags: nZCv  IRQs on  FIQs on  Mode SVC_32  ISA ARM  Segment none
[  775.913932][ T5109] Control: 10c5387d  Table: 8903c06a  DAC: 00000051
[  775.914337][ T5109] Process kworker/u4:3 (pid: 5109, stack limit = 0x72c11b08)
[  775.914896][ T5109] Stack: (0x8a895e48 to 0x8a896000)
[  775.916169][ T5109] 5e40:                   84a90358 83675bbc 843d38dc 83675be0 8a895eac 8a895e68
[  775.921568][ T5109] 5e60: 8163f8d8 801654b0 00000001 8163b8fc 8a9d9540 00000000 8a9d9540 8344ec48
[  775.922116][ T5109] 5e80: 843d38dc 84a90358 83675bbc 843d38dc 83675be0 00000100 82fe5410 84a90360
[  775.922647][ T5109] 5ea0: 8a895edc 8a895eb0 8163b930 8163f85c 8163b860 83675be8 89162c00 84820000
[  775.924412][ T5109] 5ec0: 87794000 8344ec98 8376475b 00000088 8a895f3c 8a895ee0 8015b888 8163b86c
[  775.925132][ T5109] 5ee0: 00000001 00000000 8015b7c8 84820000 00000000 00000000 83675be8 83cbf1d4
[  775.926110][ T5109] 5f00: 00000000 82fe5468 00000000 8344ec48 825ec66c 89162c00 84820000 89162c14
[  775.926605][ T5109] 5f20: 84820038 83406d00 8a894000 00000088 8a895f74 8a895f40 8015bfb8 8015b5dc
[  775.927119][ T5109] 5f40: 8a895f74 83406d00 80163c44 8a21e000 8a21d580 8a894000 00000000 8015bf54
[  775.927669][ T5109] 5f60: 89162c00 8a293e64 8a895fac 8a895f78 80164018 8015bf60 00000000 8a21e044
[  775.928386][ T5109] 5f80: 8a895fac 8a21d580 80163e94 00000000 00000000 00000000 00000000 00000000
[  775.928849][ T5109] 5fa0: 00000000 8a895fb0 8010011c 80163ea0 00000000 00000000 00000000 00000000
[  775.929311][ T5109] 5fc0: 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
[  775.930828][ T5109] 5fe0: 00000000 00000000 00000000 00000000 00000013 00000000 00000000 00000000
[  775.931436][ T5109] Backtrace: 
[  775.932504][ T5109] [<801654a4>] (kthread_stop) from [<8163f8d8>] (vhci_shutdown_connection+0x88/0x3a0)
[  775.932955][ T5109]  r7:83675be0 r6:843d38dc r5:83675bbc r4:84a90358
[  775.933240][ T5109] [<8163f850>] (vhci_shutdown_connection) from [<8163b930>] (event_handler+0xd0/0x1c0)
[  775.933546][ T5109]  r10:84a90360 r9:82fe5410 r8:00000100 r7:83675be0 r6:843d38dc r5:83675bbc
[  775.934013][ T5109]  r4:84a90358
[  775.934161][ T5109] [<8163b860>] (event_handler) from [<8015b888>] (process_one_work+0x2b8/0x984)
[  775.934572][ T5109]  r10:00000088 r9:8376475b r8:8344ec98 r7:87794000 r6:84820000 r5:89162c00
[  775.934794][ T5109]  r4:83675be8 r3:8163b860
[  775.934980][ T5109] [<8015b5d0>] (process_one_work) from [<8015bfb8>] (worker_thread+0x64/0x54c)
[  775.935259][ T5109]  r10:00000088 r9:8a894000 r8:83406d00 r7:84820038 r6:89162c14 r5:84820000
[  775.935528][ T5109]  r4:89162c00
[  775.935786][ T5109] [<8015bf54>] (worker_thread) from [<80164018>] (kthread+0x184/0x1a4)
[  775.936073][ T5109]  r10:8a293e64 r9:89162c00 r8:8015bf54 r7:00000000 r6:8a894000 r5:8a21d580
[  775.936317][ T5109]  r4:8a21e000
[  775.936466][ T5109] [<80163e94>] (kthread) from [<8010011c>] (ret_from_fork+0x14/0x38)
[  775.936757][ T5109] Exception stack(0x8a895fb0 to 0x8a895ff8)
[  775.937074][ T5109] 5fa0:                                     00000000 00000000 00000000 00000000
[  775.937550][ T5109] 5fc0: 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
[  775.937957][ T5109] 5fe0: 00000000 00000000 00000000 00000000 00000013 00000000
[  775.938225][ T5109]  r10:00000000 r9:00000000 r8:00000000 r7:00000000 r6:00000000 r5:80163e94
[  775.938489][ T5109]  r4:8a21d580
[  775.939025][ T5109] Code: e3130001 1a0000b4 e2845008 f595f000 (e1953f9f) 
[  775.974885][ T5308] binder: BINDER_SET_CONTEXT_MGR already set
[  775.975296][ T5308] binder: 5306:5308 ioctl 40046207 0 returned -16
[  775.990414][ T5109] ---[ end trace 049624382e148b5c ]---
[  775.992984][ T5109] Kernel panic - not syncing: Fatal exception
[  775.995262][    C1] CPU1: stopping
[  775.995863][    C1] CPU: 1 PID: 5080 Comm: syz-executor.0 Tainted: G      D           5.10.0-rc1+ #20
[  775.996368][    C1] Hardware name: ARM-Versatile Express
[  775.997930][    C1] Backtrace: 
[  775.998351][    C1] [<825afeb4>] (dump_backtrace) from [<825b0128>] (show_stack+0x18/0x1c)
[  775.998885][    C1]  r7:00000080 r6:60000193 r5:00000000 r4:83624124
[  775.999218][    C1] [<825b0110>] (show_stack) from [<825c0af0>] (dump_stack+0xa8/0xc8)
[  775.999617][    C1] [<825c0a48>] (dump_stack) from [<80111144>] (do_handle_IPI+0x420/0x44c)
[  776.000014][    C1]  r7:8344f53c r6:8480cc40 r5:00000001 r4:00000004
[  776.000835][    C1] [<80110d24>] (do_handle_IPI) from [<80111190>] (ipi_handler+0x20/0x28)
[  776.001320][    C1]  r9:893b7dc0 r8:893b7d38 r7:8344f53c r6:8480cc40 r5:00000014 r4:848c8000
[  776.002056][    C1] [<80111170>] (ipi_handler) from [<801cc904>] (handle_percpu_devid_fasteoi_ipi+0x9c/0xb0)
[  776.002617][    C1] [<801cc868>] (handle_percpu_devid_fasteoi_ipi) from [<801c583c>] (__handle_domain_irq+0xb0/0x120)
[  776.003190][    C1]  r9:893b7dc0 r8:00000001 r7:00000000 r6:833d441c r5:00000000 r4:833d441c
[  776.003667][    C1] [<801c578c>] (__handle_domain_irq) from [<80ebd0fc>] (gic_handle_irq+0x74/0x88)
[  776.004191][    C1]  r10:00000034 r9:893b6000 r8:e000200c r7:833d4440 r6:e0002000 r5:893b7dc0
[  776.004641][    C1]  r4:8344f53c
[  776.004952][    C1] [<80ebd088>] (gic_handle_irq) from [<80100b30>] (__irq_svc+0x70/0xb0)
[  776.005398][    C1] Exception stack(0x893b7dc0 to 0x893b7e08)
[  776.005931][    C1] 7dc0: 897693c0 00000000 89164010 00200000 893b7e90 897693c0 89815680 00000004
[  776.006754][    C1] 7de0: 803c8880 893b6000 00000034 893b7e64 893b7e68 893b7e10 803c7430 803d5ea8
[  776.008940][    C1] 7e00: 60000013 ffffffff
[  776.009294][    C1]  r9:893b6000 r8:803c8880 r7:893b7df4 r6:ffffffff r5:60000013 r4:803d5ea8
[  776.010627][    C1] [<803c7364>] (step_into) from [<803c8880>] (path_lookupat+0x19c/0x1b8)
[  776.012972][    C1]  r10:00000034 r9:893b6000 r8:893b7e90 r7:893b7f84 r6:00000001 r5:893b7e90
[  776.013651][    C1]  r4:00000000
[  776.013959][    C1] [<803c86e4>] (path_lookupat) from [<803cb644>] (filename_lookup+0xac/0x1a8)
[  776.016479][    C1]  r7:893b7f84 r6:00000081 r5:892fd000 r4:00000081
[  776.017476][    C1] [<803cb598>] (filename_lookup) from [<803cb878>] (user_path_at_empty+0x74/0x90)
[  776.018100][    C1]  r8:80100244 r7:7edce968 r6:893b7f84 r5:ffffff9c r4:00000081
[  776.018622][    C1] [<803cb804>] (user_path_at_empty) from [<803e54c8>] (sys_umount+0x4c/0x88)
[  776.019121][    C1]  r7:00000034 r6:00110000 r5:7edce968 r4:00000002
[  776.019527][    C1] [<803e547c>] (sys_umount) from [<80100060>] (ret_fast_syscall+0x0/0x2c)
[  776.019977][    C1] Exception stack(0x893b7fa8 to 0x893b7ff0)
[  776.020499][    C1] 7fa0:                   00081574 7edce968 7edce968 00000002 f804a900 00000000
[  776.021280][    C1] 7fc0: 00081574 7edce968 00110000 00000034 00081574 013d1588 000815c0 00000000
[  776.021950][    C1] 7fe0: 00000025 7edce8ec 00014310 0004ff2c
[  776.022440][    C1]  r4:00081574
[  776.023042][ T5109] Dumping ftrace buffer:
[  776.024143][ T5109]    (ftrace buffer empty)
[  776.025699][ T5109] Rebooting in 86400 seconds..
