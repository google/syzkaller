TITLE: INFO: task hung in synchronize_rcu
ALT: hang in synchronize_rcu
TYPE: HANG

[  716.122185] INFO: task syz-executor.0:16519 blocked for more than 140 seconds.
[  716.129726]       Not tainted 4.15.0+ #0
[  716.133779] "echo 0 > /proc/sys/kernel/hung_task_timeout_secs" disables this message.
[  716.141808] syz-executor.0  D11768 16519   3871 0x00000004 548862555260
[  716.148613] Call Trace:
[  716.151216]  [<ffffffff8147421f>] context_switch+0x60f/0xa60
[  716.157078]  [<ffffffff8100095a>] __schedule+0x5aa/0x1da0
[  716.175467]  [<ffffffff810021df>] schedule+0x8f/0x1b0
[  716.180696]  [<ffffffff810114e5>] schedule_timeout+0x885/0xee0
[  716.211892]  [<ffffffff81005cbc>] wait_for_completion+0x29c/0x440
[  716.238024]  [<ffffffff815a7be2>] __wait_rcu_gp+0x242/0x300
[  716.243768]  [<ffffffff815bb94f>] synchronize_sched.part.0+0xcf/0xe0
[  716.276012]  [<ffffffff815bb9ce>] synchronize_sched+0x6e/0xf0
[  716.281968]  [<ffffffff83a0caad>] synchronize_net+0x4d/0x60
[  716.287705]  [<ffffffff841943b8>] packet_release+0x978/0xc30
[  716.311492]  [<ffffffff8398e7c3>] __sock_release+0xd3/0x2b0
[  716.323245]  [<ffffffff8398e9bb>] sock_close+0x1b/0x30
[  716.328583]  [<ffffffff81ac97a9>] __fput+0x2b9/0x790
[  716.333696]  [<ffffffff81ac9d06>] ____fput+0x16/0x20
[  716.339261]  [<ffffffff8144441d>] task_work_run+0x13d/0x1c0
[  716.344982]  [<ffffffff8101ae34>] exit_to_usermode_loop+0x304/0x360
[  716.351418]  [<ffffffff8101cd41>] do_syscall_64+0x5a1/0x770
[  716.363849]  [<ffffffff84400091>] entry_SYSCALL_64_after_hwframe+0x42/0xb7
[  716.370884] RIP: 0033:0x4135d1
[  716.374069] RSP: 002b:00007ffcf697a620 EFLAGS: 00000293 ORIG_RAX: 0000000000000003
[  716.381801] RAX: 0000000000000000 RBX: 0000000000000005 RCX: 00000000004135d1
[  716.389097] RDX: 0000000000000000 RSI: 000000000000130f RDI: 0000000000000004
[  716.396367] RBP: 0000000000000001 R08: 00000000aef53312 R09: ffffffffffffffff
[  716.403673] R10: 00007ffcf697a700 R11: 0000000000000293 R12: 000000000075c9a0
[  716.410964] R13: 000000000075c9a0 R14: 00000000007618c0 R15: 000000000075bf2c
[  716.418270] 
[  716.418270] Showing all locks held in the system:
[  716.424617] 2 locks held by khungtaskd/733:
[  716.428984]  #0:  (rcu_read_lock){....}, at: [<00000000725da021>] watchdog+0x147/0xc60
[  716.437437]  #1:  (tasklist_lock){.+.+}, at: [<00000000587bedf5>] debug_show_all_locks+0x7f/0x230
[  716.446543] 2 locks held by getty/3831:
[  716.450542]  #0:  (&tty->ldisc_sem){++++}, at: [<0000000045bcf4ae>] ldsem_down_read+0x33/0x40
[  716.459252]  #1:  (&ldata->atomic_read_lock){+.+.}, at: [<000000003ee65353>] n_tty_read+0x232/0x1b70
[  716.468574] 2 locks held by getty/3832:
[  716.472534]  #0:  (&tty->ldisc_sem){++++}, at: [<0000000045bcf4ae>] ldsem_down_read+0x33/0x40
[  716.481246]  #1:  (&ldata->atomic_read_lock){+.+.}, at: [<000000003ee65353>] n_tty_read+0x232/0x1b70
[  716.490567] 2 locks held by getty/3833:
[  716.494527]  #0:  (&tty->ldisc_sem){++++}, at: [<0000000045bcf4ae>] ldsem_down_read+0x33/0x40
[  716.503234]  #1:  (&ldata->atomic_read_lock){+.+.}, at: [<000000003ee65353>] n_tty_read+0x232/0x1b70
[  716.512577] 2 locks held by getty/3834:
[  716.516541]  #0:  (&tty->ldisc_sem){++++}, at: [<0000000045bcf4ae>] ldsem_down_read+0x33/0x40
[  716.525298]  #1:  (&ldata->atomic_read_lock){+.+.}, at: [<000000003ee65353>] n_tty_read+0x232/0x1b70
[  716.534621] 2 locks held by getty/3835:
[  716.538615]  #0:  (&tty->ldisc_sem){++++}, at: [<0000000045bcf4ae>] ldsem_down_read+0x33/0x40
[  716.547325]  #1:  (&ldata->atomic_read_lock){+.+.}, at: [<000000003ee65353>] n_tty_read+0x232/0x1b70
[  716.556624] 2 locks held by getty/3836:
[  716.560612]  #0:  (&tty->ldisc_sem){++++}, at: [<0000000045bcf4ae>] ldsem_down_read+0x33/0x40
[  716.569325]  #1:  (&ldata->atomic_read_lock){+.+.}, at: [<000000003ee65353>] n_tty_read+0x232/0x1b70
[  716.578653] 2 locks held by getty/3837:
[  716.582618]  #0:  (&tty->ldisc_sem){++++}, at: [<0000000045bcf4ae>] ldsem_down_read+0x33/0x40
[  716.591327]  #1:  (&ldata->atomic_read_lock){+.+.}, at: [<000000003ee65353>] n_tty_read+0x232/0x1b70
[  716.600778] 1 lock held by syz-executor.0/16519:
[  716.605525]  #0:  (&sb->s_type->i_mutex_key#8){+.+.}, at: [<00000000e476fb3e>] __sock_release+0x89/0x2b0
[  716.615199] 1 lock held by syz-executor.1/16564:
[  716.619973]  #0:  (&sb->s_type->i_mutex_key#8){+.+.}, at: [<00000000e476fb3e>] __sock_release+0x89/0x2b0
[  716.629642] 
[  716.631258] =============================================
[  716.631258] 
[  716.638295] NMI backtrace for cpu 0
[  716.641919] CPU: 0 PID: 733 Comm: khungtaskd Not tainted 4.15.0+ #0
[  716.648311] Hardware name: Google Google Compute Engine/Google Compute Engine, BIOS Google 01/01/2011
[  716.657657] Call Trace:
[  716.660249]  [<ffffffff84268022>] dump_stack+0x14d/0x20b
[  716.672199]  [<ffffffff842745a7>] nmi_cpu_backtrace.cold+0x19/0x98
[  716.685291]  [<ffffffff8427457a>] nmi_trigger_cpumask_backtrace+0x16a/0x17e
[  716.692391]  [<ffffffff8136ee14>] arch_trigger_cpumask_backtrace+0x14/0x20
[  716.699401]  [<ffffffff816d043d>] watchdog+0x7bd/0xc60
[  716.704683]  [<ffffffff8144c318>] kthread+0x348/0x420
[  716.723548]  [<ffffffff84400266>] ret_from_fork+0x56/0x70
[  716.729168] Sending NMI from CPU 0 to CPUs 1:
[  716.733670] NMI backtrace for cpu 1
[  716.733680] CPU: 1 PID: 16526 Comm: syz-executor.0 Not tainted 4.15.0+ #0
[  716.733685] Hardware name: Google Google Compute Engine/Google Compute Engine, BIOS Google 01/01/2011
[  716.733699] RIP: 0010:lock_acquire+0x15a/0x330
[  716.733703] RSP: 0018:ffff8801a1d1f1c0 EFLAGS: 00000246
[  716.733710] RAX: 0000000000000007 RBX: ffff8801bdcd8080 RCX: 0000000000000000
[  716.733715] RDX: 0000000000000000 RSI: ffff8801bdcd8a48 RDI: 0000000000000246
[  716.733720] RBP: ffff8801a1d1f208 R08: 0000000000011fdd R09: 0000000000000000
[  716.733725] R10: ffff8801bdcd8a48 R11: 0000000000000001 R12: ffff8801c932e0e0
[  716.733729] R13: 0000000000000000 R14: 0000000000000000 R15: 0000000000000000
[  716.733736] FS:  00007f7756ce0700(0000) GS:ffff8801dad00000(0000) knlGS:0000000000000000
[  716.733741] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[  716.733746] CR2: 00007f1029819140 CR3: 000000017682e004 CR4: 00000000001626f0
[  716.733754] DR0: 0000000000000000 DR1: 0000000000000000 DR2: 0000000000000000
[  716.733758] DR3: 0000000000000000 DR6: 00000000fffe0ff0 DR7: 0000000000000400
[  716.733760] Call Trace:
[  716.733787]  [<ffffffff81006e74>] __mutex_lock+0xf4/0x1430
[  716.733874]  [<ffffffff810081c6>] mutex_lock_nested+0x16/0x20
[  716.733893]  [<ffffffff83ba8841>] tc_new_tfilter+0x6e1/0x1c70
[  716.734001]  [<ffffffff83a7d1f5>] rtnetlink_rcv_msg+0x935/0xc10
[  716.734035]  [<ffffffff83ca56ca>] netlink_rcv_skb+0x17a/0x460
[  716.734076]  [<ffffffff83a7625d>] rtnetlink_rcv+0x1d/0x30
[  716.734086]  [<ffffffff83ca3a86>] netlink_unicast+0x536/0x720
[  716.734130]  [<ffffffff83ca450a>] netlink_sendmsg+0x89a/0xd50
[  716.734176]  [<ffffffff83995cae>] sock_sendmsg+0x12e/0x170
[  716.734186]  [<ffffffff83997602>] ___sys_sendmsg+0x3e2/0x960
[  716.734277]  [<ffffffff8399b803>] __sys_sendmmsg+0x1c3/0x4e0
[  716.734389]  [<ffffffff8399bb52>] SyS_sendmmsg+0x32/0x40
[  716.734409]  [<ffffffff8101ccc8>] do_syscall_64+0x528/0x770
[  716.734433]  [<ffffffff84400091>] entry_SYSCALL_64_after_hwframe+0x42/0xb7
[  716.734440] RIP: 0033:0x459799
[  716.734444] RSP: 002b:00007f7756cdfc78 EFLAGS: 00000246 ORIG_RAX: 0000000000000133
[  716.734451] RAX: ffffffffffffffda RBX: 0000000000000004 RCX: 0000000000459799
[  716.734456] RDX: 04924924924926c0 RSI: 0000000020000140 RDI: 0000000000000006
[  716.734460] RBP: 000000000075bf20 R08: 0000000000000000 R09: 0000000000000000
[  716.734465] R10: 0000000000000000 R11: 0000000000000246 R12: 00007f7756ce06d4
[  716.734470] R13: 00000000004c7435 R14: 00000000004de170 R15: 00000000ffffffff
[  716.734474] Code: ea 03 0f b6 14 02 48 89 f8 83 e0 07 83 c0 03 38 d0 7c 08 84 d2 0f 85 b7 01 00 00 c7 83 94 09 00 00 00 00 00 00 48 8b 7d c8 57 9d <0f> 1f 44 00 00 48 8d 65 d8 5b 41 5c 41 5d 41 5e 41 5f 5d c3 65 
[  716.734474] IP: 0xffffffff81556fba:
[  716.734598] 6fb8  0180820f 8b4c0000 8944c84d 4c006af2 006ae789 44d88945 8944f989 1075ffee
[  716.734614] 6fd8  49d075ff 4909e9c1 4101f183 e801e183 ffffaa84 0000b848 fc000000 4865dfff
[  716.734630] 6ff8  00251c8b 480001e1 0994bb8d 83480000 894820c4 eac148fa 14b60f03 f8894802
[  716.734646] 7018  8307e083 d03803c0 d284087c 01b7850f 83c70000 00000994 00000000 c87d8b48
[  716.734661] 7038  1f0f9d57 48000044 5bd8658d 5d415c41 5f415e41 8b65c35d ac10db05 48c0897e
[  716.734677] 7058  8105a30f 0f047a2e ffff5983 5d8944ff 05ff65b8 7eac7020 110d8b48 480477f8
[  716.734693] 7078  e8c04d89 00050c80 c04d8b48 8b44c085 0d74b85d aaf23d80 0f000477 0000eb84
[  716.734708] 7098  c9854800 0090840f b8480000 00000000 dffffc00 48ca8948 c148cb89 3c8003ea
[  716.734724] 70b8  850f0002 0000012b 44018b48 48c05d89 48087b8d 000000be fffc0000 fa8948df
[  716.734741] 
[  716.734741] BX: 0xffff8801bdcd8000:
[  716.734743] 8000  00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
[  716.734758] 8020  00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
[  716.734773] 8040  d3c8fb00 ffff8801 c38e4232 00007f09 00000000 00000000 00000000 62696c2f
[  716.734788] 8060  3638782f 2d34365f 756e696c 6e672d78 696c2f75 732e6362 00362e6f 00000000
[  716.734804] 8080  8000000c 00000000 00000000 00000000 00000000 00000000 00000000 00000000
[  716.734819] 80a0  00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
[  716.734838] 80c0  a1d1c000 ffff8801 00000002 00404140 00000000 00000000 00000000 00000000
[  716.734853] 80e0  00000001 00000001 00000002 00000000 0000a200 00000001 d799e180 ffff8801
[  716.734870] 
[  716.734870] SI: 0xffff8801bdcd89c8:
[  716.734871] 89c8  84400a6b ffffffff 846004c3 ffffffff 00030465 00030463 00000001 00000001
[  716.734887] 89e8  813e756a ffffffff 84600602 ffffffff 0003045b 00030464 00000001 00000000
[  716.734902] 8a08  f326e2f3 bb2ba18d 00000002 00000001 00000000 00000000 83a71a87 ffffffff
[  716.734917] 8a28  85c11540 ffffffff 00000000 00000000 002000c1 00000000 00000000 00000000
[  716.734932] 8a48  13f16a10 77c49f94 83ba8841 ffffffff c932e0e0 ffff8801 00000000 00000000
[  716.734948] 8a68  00200502 00000000 00000000 00000000 d42a1325 a39a4e42 82194f31 ffffffff
[  716.734963] 8a88  8b1fef40 ffffffff 00000000 00000000 00620002 00000000 00000000 00000000
[  716.734979] 8aa8  d42a1325 a39a4e42 82194f31 ffffffff 8b1fef40 ffffffff 00000000 00000000
[  716.734995] 
[  716.734995] BP: 0xffff8801a1d1f188:
[  716.734997] f188  00000000 00000000 a1d1f208 ffff8801 81556fec ffffffff 00000000 00000000
[  716.735012] f1a8  83ba8841 ffffffff 00000000 00000000 00000246 00000000 848d4ec0 ffffffff
[  716.735028] f1c8  00000001 00000000 00000246 00000000 00000000 00000000 00000000 dffffc00
[  716.735043] f1e8  00000000 00000000 00000000 00000000 83ba8841 ffffffff c932e080 ffff8801
[  716.735058] f208  a1d1f3a0 ffff8801 81006e74 ffffffff 83ba8841 ffffffff bdcd8a10 ffff8801
[  716.735074] f228  00000002 ffffffff 41b58ab3 00000000 85107962 ffffffff 81556660 ffffffff
[  716.735089] f248  00000002 00000000 00000001 00000000 83ba8841 ffffffff c932e0e0 ffff8801
[  716.735105] f268  343a3e50 1ffff100 00000000 00000000 343a3e52 1ffff100 41b58ab3 00000000
[  716.735121] 
[  716.735121] R10: 0xffff8801bdcd89c8:
[  716.735123] 89c8  84400a6b ffffffff 846004c3 ffffffff 00030465 00030463 00000001 00000001
[  716.735138] 89e8  813e756a ffffffff 84600602 ffffffff 0003045b 00030464 00000001 00000000
[  716.735154] 8a08  f326e2f3 bb2ba18d 00000002 00000001 00000000 00000000 83a71a87 ffffffff
[  716.735169] 8a28  85c11540 ffffffff 00000000 00000000 002000c1 00000000 00000000 00000000
[  716.735184] 8a48  13f16a10 77c49f94 83ba8841 ffffffff c932e0e0 ffff8801 00000000 00000000
[  716.735200] 8a68  00200502 00000000 00000000 00000000 d42a1325 a39a4e42 82194f31 ffffffff
[  716.735215] 8a88  8b1fef40 ffffffff 00000000 00000000 00620002 00000000 00000000 00000000
[  716.735230] 8aa8  d42a1325 a39a4e42 82194f31 ffffffff 8b1fef40 ffffffff 00000000 00000000
[  716.735247] 
[  716.735247] R12: 0xffff8801c932e060:
[  716.735249] e060  00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
[  716.735263] e080  00000000 00000000 00000000 dead4ead ffffffff 00000000 ffffffff ffffffff
[  716.735279] e0a0  85f9e760 ffffffff 00000000 00000000 00000000 00000000 848d4e00 ffffffff
[  716.735294] e0c0  00000000 00000000 c932e0c8 ffff8801 c932e0c8 ffff8801 c932e080 ffff8801
[  716.735310] e0e0  8bb33420 ffffffff 88bcfc50 ffffffff 00000000 00000000 84e32600 ffffffff
[  716.735325] e100  00000000 00000000 c56196c0 ffff8801 c56196c0 ffff8801 c5619640 ffff8801
[  716.735341] e120  00000000 00000002 00000000 00000101 00000000 00000000 00000000 00000000
[  716.735356] e140  00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
[  716.735372] 
[  716.735372] SP: 0xffff8801a1d1f140:
[  716.735374] f140  bdcd8a10 ffff8801 bdcd8a18 ffff8801 00000246 00000000 22c78f00 6c37ac32
[  716.735390] f160  bdcd8080 ffff8801 bdcd8080 ffff8801 c932e0e0 ffff8801 00000000 00000000
[  716.735405] f180  00000000 00000000 00000000 00000000 a1d1f208 ffff8801 81556fec ffffffff
[  716.735420] f1a0  00000000 00000000 83ba8841 ffffffff 00000000 00000000 00000246 00000000
[  716.735435] f1c0  848d4ec0 ffffffff 00000001 00000000 00000246 00000000 00000000 00000000
[  716.735450] f1e0  00000000 dffffc00 00000000 00000000 00000000 00000000 83ba8841 ffffffff
[  716.735466] f200  c932e080 ffff8801 a1d1f3a0 ffff8801 81006e74 ffffffff 83ba8841 ffffffff
[  716.735481] f220  bdcd8a10 ffff8801 00000002 ffffffff 41b58ab3 00000000 85107962 ffffffff
[  716.735692] Kernel panic - not syncing: hung_task: blocked tasks
[  716.735702] INFO: NMI handler (nmi_cpu_backtrace_handler) took too long to run: 1.831 msecs
[  717.805254] CPU: 0 PID: 733 Comm: khungtaskd Not tainted 4.15.0+ #0
[  717.811653] Hardware name: Google Google Compute Engine/Google Compute Engine, BIOS Google 01/01/2011
[  717.820996] Call Trace:
[  717.823597]  [<ffffffff84268022>] dump_stack+0x14d/0x20b
[  717.829052]  [<ffffffff813ccfd4>] __panic+0x1c3/0x45d
[  717.834246]  [<ffffffff813cd339>] panic_saved_regs+0xcb/0xcb
[  717.884627]  [<ffffffff816d0453>] watchdog+0x7d3/0xc60
[  717.889922]  [<ffffffff8144c318>] kthread+0x348/0x420
[  717.908785]  [<ffffffff84400266>] ret_from_fork+0x56/0x70
[  717.915370] Kernel command line: oops=panic panic=10 io_delay=0xed libata.allow_tpm=1 nmi_watchdog=panic tco_start=1 quiet svm.nested=0 slab_nomerge acpi_enforce_resources=lax eagerfpu=on intel_iommu=optin scsi_mod.force_queue_depth=1,512:0 BOOT_IMAGE=/vmlinuz root=/dev/sda1 console=ttyS0 earlyprintk=serial vsyscall=native rodata=n oops=panic panic_on_warn=1 nmi_watchdog=panic panic=86400 workqueue.watchdog_thresh=140 io_delay=0xed libata.allow_tpm=1 tco_start=1 svm.nested=0 kvm-intel.nested=1 slab_nomerge acpi_enforce_resources=lax eagerfpu=on intel_iommu=optin scsi_mod.force_queue_depth=1,512:0 resched_latency_warn_ms=0
[  717.970589] Kernel Offset: disabled
[  717.974202] Microcode: 0x1
[  717.977032] Task Info: processes: 134, tasks: 145, running: 26, iowait: 0
[  717.983935] Uptime(seconds): 717.98
[  717.987551] Linux syzkaller 4.15.0+ #0 SMP now x86_64 (none)
[  717.993331] netdump-meta: 1|gti=46613caa56245d937d125fc7648f143698172f71
[  718.000326] Rebooting in 86400 seconds..
