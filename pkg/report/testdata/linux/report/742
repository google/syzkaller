TITLE: kernel BUG in netfs_perform_write
TYPE: BUG
EXECUTOR: proc=0, id=886

[  222.544519][ T8817] ------------[ cut here ]------------
[  222.866443][ T8829] 9pnet_virtio: no channels available for device syz
[  222.868961][ T8817] kernel BUG at mm/filemap.c:1499!
[  222.928082][ T8817] Oops: invalid opcode: 0000 [#1] PREEMPT SMP KASAN NOPTI
[  222.931127][ T5950] GRED: Unable to relocate VQ 0x0 after dequeue, screwing up backlog
[  222.942066][ T8817] CPU: 3 UID: 0 PID: 8817 Comm: syz.0.886 Not tainted 6.14.0-rc3-syzkaller-00060-g6537cfb395f3 #0
[  222.942096][ T8817] Hardware name: QEMU Standard PC (Q35 + ICH9, 2009), BIOS 1.16.3-debian-1.16.3-2~bpo12+1 04/01/2014
[  222.942106][ T8817] RIP: 0010:folio_unlock+0xb3/0xd0
[  222.942138][ T8817] Code: f3 68 ca ff 48 89 ef 31 f6 e8 e9 ed ff ff 5b 5d e9 e2 68 ca ff e8 dd 68 ca ff 48 c7 c6 00 8a 78 8b 48 89 ef e8 de c9 11 00 90 <0f> 0b 48 89 df e8 d3 83 2d 00 e9 7b ff ff ff 66 66 2e 0f 1f 84 00
[  222.942153][ T8817] RSP: 0018:ffffc900055df988 EFLAGS: 00010293
[  222.942167][ T8817] RAX: 0000000000000000 RBX: 0000000000000000 RCX: ffffc900055df830
[  222.942178][ T8817] RDX: ffff888022f48000 RSI: ffffffff81ef7612 RDI: ffff888022f48444
[  222.942188][ T8817] RBP: ffffea0000df3b00 R08: 0000000000000000 R09: fffffbfff20c49e2
[  222.942198][ T8817] R10: ffffffff90624f17 R11: 0000000000000004 R12: ffff88804fd17600
[  222.942208][ T8817] R13: ffff88804fd17920 R14: ffffea0000df3b00 R15: ffffc900055dfde8
[  222.942218][ T8817] FS:  00007f734d9f66c0(0000) GS:ffff88806a900000(0000) knlGS:0000000000000000
[  222.942247][ T8817] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[  222.942259][ T8817] CR2: 0000555579553808 CR3: 0000000050540000 CR4: 0000000000352ef0
[  222.942269][ T8817] DR0: 0000000000000000 DR1: 0000000000000000 DR2: 0000000000000000
[  222.942278][ T8817] DR3: 0000000000000000 DR6: 00000000fffe0ff0 DR7: 0000000000000400
[  222.942287][ T8817] Call Trace:
[  222.942294][ T8817]  <TASK>
[  222.942304][ T8817]  ? die+0x31/0x80
[  222.942328][ T8817]  ? do_trap+0x232/0x430
[  222.942345][ T8817]  ? folio_unlock+0xb3/0xd0
[  222.942362][ T8817]  ? folio_unlock+0xb3/0xd0
[  222.942377][ T8817]  ? do_error_trap+0xf4/0x230
[  222.942393][ T8817]  ? folio_unlock+0xb3/0xd0
[  222.942410][ T8817]  ? handle_invalid_op+0x34/0x40
[  222.942426][ T8817]  ? folio_unlock+0xb3/0xd0
[  222.942442][ T8817]  ? exc_invalid_op+0x2e/0x50
[  222.942467][ T8817]  ? asm_exc_invalid_op+0x1a/0x20
[  222.942490][ T8817]  ? folio_unlock+0xb2/0xd0
[  222.942506][ T8817]  ? folio_unlock+0xb3/0xd0
[  222.942522][ T8817]  ? folio_unlock+0xb2/0xd0
[  222.942538][ T8817]  netfs_perform_write+0xc04/0x2140
[  222.942565][ T8817]  ? __pfx_netfs_perform_write+0x10/0x10
[  222.942594][ T8817]  ? inode_needs_update_time.part.0+0x191/0x270
[  222.942615][ T8817]  netfs_file_write_iter+0x494/0x550
[  222.942635][ T8817]  v9fs_file_write_iter+0x9b/0x100
[  222.942656][ T8817]  vfs_write+0x5ae/0x1150
[  222.942679][ T8817]  ? __pfx_v9fs_file_write_iter+0x10/0x10
[  222.942696][ T8817]  ? __pfx___mutex_lock+0x10/0x10
[  222.942717][ T8817]  ? __pfx_vfs_write+0x10/0x10
[  222.942744][ T8817]  ksys_write+0x12b/0x250
[  222.942768][ T8817]  ? __pfx_ksys_write+0x10/0x10
[  222.942791][ T8817]  do_syscall_64+0xcd/0x250
[  222.942809][ T8817]  entry_SYSCALL_64_after_hwframe+0x77/0x7f
[  222.942828][ T8817] RIP: 0033:0x7f734fb8cde9
[  222.942842][ T8817] Code: ff ff c3 66 2e 0f 1f 84 00 00 00 00 00 0f 1f 40 00 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 c7 c1 a8 ff ff ff f7 d8 64 89 01 48
[  222.942856][ T8817] RSP: 002b:00007f734d9f6038 EFLAGS: 00000246 ORIG_RAX: 0000000000000001
[  222.942871][ T8817] RAX: ffffffffffffffda RBX: 00007f734fda5fa0 RCX: 00007f734fb8cde9
[  222.942880][ T8817] RDX: 000000000000000a RSI: 0000400000000080 RDI: 0000000000000004
[  222.942890][ T8817] RBP: 00007f734d9f6090 R08: 0000000000000000 R09: 0000000000000000
[  222.942899][ T8817] R10: 0000000000000000 R11: 0000000000000246 R12: 0000000000000001
[  222.942908][ T8817] R13: 0000000000000000 R14: 00007f734fda5fa0 R15: 00007ffecea88e38
[  222.942921][ T8817]  </TASK>
[  222.942927][ T8817] Modules linked in:
[  222.943041][ T8817] ---[ end trace 0000000000000000 ]---
[  222.943050][ T8817] RIP: 0010:folio_unlock+0xb3/0xd0
[  222.943068][ T8817] Code: f3 68 ca ff 48 89 ef 31 f6 e8 e9 ed ff ff 5b 5d e9 e2 68 ca ff e8 dd 68 ca ff 48 c7 c6 00 8a 78 8b 48 89 ef e8 de c9 11 00 90 <0f> 0b 48 89 df e8 d3 83 2d 00 e9 7b ff ff ff 66 66 2e 0f 1f 84 00
[  222.943083][ T8817] RSP: 0018:ffffc900055df988 EFLAGS: 00010293
[  222.943095][ T8817] RAX: 0000000000000000 RBX: 0000000000000000 RCX: ffffc900055df830
[  222.943105][ T8817] RDX: ffff888022f48000 RSI: ffffffff81ef7612 RDI: ffff888022f48444
[  222.943115][ T8817] RBP: ffffea0000df3b00 R08: 0000000000000000 R09: fffffbfff20c49e2
[  222.943125][ T8817] R10: ffffffff90624f17 R11: 0000000000000004 R12: ffff88804fd17600
[  222.943135][ T8817] R13: ffff88804fd17920 R14: ffffea0000df3b00 R15: ffffc900055dfde8
[  222.943146][ T8817] FS:  00007f734d9f66c0(0000) GS:ffff88806a900000(0000) knlGS:0000000000000000
[  222.943174][ T8817] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[  222.943186][ T8817] CR2: 0000555579553808 CR3: 0000000050540000 CR4: 0000000000352ef0
[  222.943197][ T8817] DR0: 0000000000000000 DR1: 0000000000000000 DR2: 0000000000000000
[  222.943206][ T8817] DR3: 0000000000000000 DR6: 00000000fffe0ff0 DR7: 0000000000000400
[  222.943218][ T8817] Kernel panic - not syncing: Fatal exception
[  222.964234][ T8817] Kernel Offset: disabled
