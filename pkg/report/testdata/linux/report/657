TITLE: WARNING: nested lock was not taken in ntfs_fill_super
TYPE: LOCKDEP

[  292.991605][T13544] ==================================
[  292.996890][T13544] WARNING: Nested lock was not taken
[  293.002171][T13544] 6.0.0-rc7-syzkaller-00220-gffb4d94b4314 #0 Not tainted
[  293.009187][T13544] ----------------------------------
[  293.014464][T13544] syz-executor.3/13544 is trying to lock:
[  293.020176][T13544] ffff88803c86db70 (&sb->s_type->i_lock_key#36){+.+.}-{2:2}, at: _atomic_dec_and_lock+0x9d/0x110
[  293.030778][T13544] 
[  293.030778][T13544] but this task is not holding:
[  293.037813][T13544] general protection fault, probably for non-canonical address 0xdffffc0000000003: 0000 [#1] PREEMPT SMP KASAN
[  293.049528][T13544] KASAN: null-ptr-deref in range [0x0000000000000018-0x000000000000001f]
[  293.057940][T13544] CPU: 0 PID: 13544 Comm: syz-executor.3 Not tainted 6.0.0-rc7-syzkaller-00220-gffb4d94b4314 #0
[  293.068349][T13544] Hardware name: Google Google Compute Engine/Google Compute Engine, BIOS Google 09/22/2022
[  293.078407][T13544] RIP: 0010:__lock_acquire+0x1112/0x1f60
[  293.084128][T13544] Code: 3c 30 00 48 8b 5c 24 70 74 12 48 89 df e8 66 b5 72 00 49 be 00 00 00 00 00 fc ff df 48 8b 1b 48 83 c3 18 48 89 d8 48 c1 e8 03 <42> 80 3c 30 00 74 08 48 89 df e8 3f b5 72 00 48 8b 33 45 31 f6 48
[  293.103745][T13544] RSP: 0000:ffffc90004cd7828 EFLAGS: 00010006
[  293.109815][T13544] RAX: 0000000000000003 RBX: 0000000000000018 RCX: b2d9940eb6955500
[  293.117792][T13544] RDX: 0000000000000000 RSI: 0000000080000001 RDI: 0000000000000000
[  293.125763][T13544] RBP: ffff88802da005e0 R08: ffffffff816bd38d R09: ffffed1017344f14
[  293.133734][T13544] R10: ffffed1017344f14 R11: 1ffff11017344f13 R12: ffff88802da00848
[  293.141706][T13544] R13: 4fa3c035f2826504 R14: dffffc0000000000 R15: ffff88802da00000
[  293.149674][T13544] FS:  00007fa645647700(0000) GS:ffff8880b9a00000(0000) knlGS:0000000000000000
[  293.158608][T13544] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[  293.165190][T13544] CR2: 00007f32fc112dc9 CR3: 000000001db81000 CR4: 00000000003506f0
[  293.173163][T13544] DR0: 0000000000000000 DR1: 0000000000000000 DR2: 0000000000000000
[  293.181141][T13544] DR3: 0000000000000000 DR6: 00000000fffe0ff0 DR7: 0000000000000400
[  293.189119][T13544] Call Trace:
[  293.192408][T13544]  <TASK>
[  293.195352][T13544]  lock_acquire+0x182/0x3c0
[  293.220069][T13544]  _raw_spin_lock+0x2a/0x40
[  293.229862][T13544]  _atomic_dec_and_lock+0x9d/0x110
[  293.234979][T13544]  iput+0x85/0x760
[  293.238707][T13544]  ntfs_fill_super+0x3af3/0x42a0
[  293.252783][T13544]  get_tree_bdev+0x400/0x620
[  293.261711][T13544]  vfs_get_tree+0x88/0x270
[  293.266135][T13544]  do_new_mount+0x289/0xad0
[  293.280957][T13544]  __se_sys_mount+0x2d3/0x3c0
[  293.306387][T13544]  do_syscall_64+0x3d/0xb0
[  293.310808][T13544]  entry_SYSCALL_64_after_hwframe+0x63/0xcd
[  293.316706][T13544] RIP: 0033:0x7fa64448bada
[  293.321133][T13544] Code: 48 c7 c2 b8 ff ff ff f7 d8 64 89 02 b8 ff ff ff ff eb d2 e8 b8 04 00 00 0f 1f 84 00 00 00 00 00 49 89 ca b8 a5 00 00 00 0f 05 <48> 3d 01 f0 ff ff 73 01 c3 48 c7 c1 b8 ff ff ff f7 d8 64 89 01 48
[  293.340742][T13544] RSP: 002b:00007fa645646f88 EFLAGS: 00000202 ORIG_RAX: 00000000000000a5
[  293.349162][T13544] RAX: ffffffffffffffda RBX: 0000000020000200 RCX: 00007fa64448bada
[  293.357147][T13544] RDX: 0000000020000000 RSI: 0000000020000100 RDI: 00007fa645646fe0
[  293.365129][T13544] RBP: 00007fa645647020 R08: 00007fa645647020 R09: 0000000020000000
[  293.373103][T13544] R10: 0000000000000000 R11: 0000000000000202 R12: 0000000020000000
[  293.381081][T13544] R13: 0000000020000100 R14: 00007fa645646fe0 R15: 0000000020000140
[  293.389064][T13544]  </TASK>
[  293.392083][T13544] Modules linked in:
[  293.395984][T13544] ---[ end trace 0000000000000000 ]---
