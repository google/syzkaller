TITLE: WARNING: locking bug in inet_autobind

[ 2979.659060][ T4073] WARNING: CPU: 0 PID: 4073 at kernel/locking/lockdep.c:734 register_lock_class+0xe10/0x1860
[ 2979.669279][ T4073] Kernel panic - not syncing: panic_on_warn set ...
[ 2979.675885][ T4073] CPU: 0 PID: 4073 Comm: syz-executor.2 Not tainted 5.1.0+ #3
[ 2979.683358][ T4073] Hardware name: Google Google Compute Engine/Google Compute Engine, BIOS Google 01/01/2011
[ 2979.693432][ T4073] Call Trace:
[ 2979.696743][ T4073]  dump_stack+0x172/0x1f0
[ 2979.706460][ T4073]  panic+0x2cb/0x65c
[ 2979.736359][ T4073]  __warn.cold+0x20/0x45
[ 2979.745989][ T4073]  report_bug+0x263/0x2b0
[ 2979.750393][ T4073]  do_error_trap+0x11b/0x200
[ 2979.755034][ T4073]  do_invalid_op+0x37/0x50
[ 2979.764849][ T4073]  invalid_op+0x14/0x20
[ 2979.769011][ T4073] RIP: 0010:register_lock_class+0xe10/0x1860
[ 2979.774996][ T4073] Code: 00 48 89 da 4d 8b 76 c0 48 b8 00 00 00 00 00 fc ff df 48 c1 ea 03 80 3c 02 00 0f 85 23 07 00 00 4c 89 33 e9 e3 f4 ff ff 0f 0b <0f> 0b e9 ea f3 ff ff 44 89 e0 4c 8b 95 50 ff ff ff 83 c0 01 4c 8b
[ 2979.794625][ T4073] RSP: 0018:ffff888071ed7928 EFLAGS: 00010083
[ 2979.800705][ T4073] RAX: dffffc0000000000 RBX: ffff888086953820 RCX: 0000000000000000
[ 2979.808687][ T4073] RDX: 1ffff11010d2a707 RSI: 0000000000000000 RDI: ffff888086953838
[ 2979.816664][ T4073] RBP: ffff888071ed79f0 R08: 1ffff1100e3daf2d R09: ffffffff8a445c80
[ 2979.824637][ T4073] R10: ffffffff8a0cf488 R11: 0000000000000000 R12: ffffffff8a10ecb0
[ 2979.832620][ T4073] R13: 0000000000000000 R14: 0000000000000000 R15: ffffffff87fd7c20
[ 2979.855656][ T4073]  __lock_acquire+0x116/0x5490
[ 2979.921668][ T4073]  reacquire_held_locks+0xfa/0x520
[ 2979.940979][ T4073]  lock_release+0x3b9/0xa00
[ 2979.955221][ T4073]  release_sock+0x183/0x1c0
[ 2979.959746][ T4073]  inet_autobind+0x145/0x1a0
[ 2979.964345][ T4073]  inet_dgram_connect+0x252/0x2e0
[ 2979.969368][ T4073]  __sys_connect+0x266/0x330
[ 2980.005523][ T3879] kobject: 'loop5' (00000000a628c021): kobject_uevent_env
[ 2980.007358][ T4073]  __ia32_sys_connect+0x72/0xb0
[ 2980.007374][ T4073]  do_fast_syscall_32+0x281/0xd54
[ 2980.007397][ T4073]  entry_SYSENTER_compat+0x70/0x7f
[ 2980.014624][ T3879] kobject: 'loop5' (00000000a628c021): fill_kobj_path: path = '/devices/virtual/block/loop5'
[ 2980.019870][ T4073] RIP: 0023:0xf7fd4849
[ 2980.019884][ T4073] Code: 85 d2 74 02 89 0a 5b 5d c3 8b 04 24 c3 8b 14 24 c3 8b 3c 24 c3 90 90 90 90 90 90 90 90 90 90 90 90 51 52 55 89 e5 0f 34 cd 80 <5d> 5a 59 c3 90 90 90 90 eb 0d 90 90 90 90 90 90 90 90 90 90 90 90
[ 2980.019891][ T4073] RSP: 002b:00000000f5dd00cc EFLAGS: 00000296 ORIG_RAX: 000000000000016a
[ 2980.019902][ T4073] RAX: ffffffffffffffda RBX: 0000000000000003 RCX: 0000000020000100
[ 2980.019908][ T4073] RDX: 000000000000001c RSI: 0000000000000000 RDI: 0000000000000000
[ 2980.019915][ T4073] RBP: 0000000000000000 R08: 0000000000000000 R09: 0000000000000000
[ 2980.019920][ T4073] R10: 0000000000000000 R11: 0000000000000000 R12: 0000000000000000
[ 2980.019938][ T4073] R13: 0000000000000000 R14: 0000000000000000 R15: 0000000000000000
[ 2980.026178][ T4073] Kernel Offset: disabled
[ 2980.127830][ T4073] Rebooting in 86400 seconds..
