TITLE: BUG: unable to handle kernel paging request in qlist_free_all

[ 2766.561238][T26603] BUG: unable to handle kernel paging request at ffffe8ffffe00000
[ 2766.569067][T26603] #PF error: [normal kernel read fault]
[ 2766.574611][T26603] PGD 12c25b067 P4D 12c25b067 PUD 12c25c067 PMD 0 
[ 2766.581116][T26603] Oops: 0000 [#1] PREEMPT SMP KASAN
[ 2766.586307][T26603] CPU: 0 PID: 26603 Comm: syz-executor.1 Not tainted 5.0.0+ #136
[ 2766.594015][T26603] Hardware name: Google Google Compute Engine/Google Compute Engine, BIOS Google 01/01/2011
[ 2766.604077][T26603] RIP: 0010:__memmove+0x24/0x1a0
[ 2766.609031][T26603] Code: 90 90 90 90 90 90 48 89 f8 48 83 fa 20 0f 82 03 01 00 00 48 39 fe 7d 0f 49 89 f0 49 01 d0 49 39 f8 0f 8f 9f 00 00 00 48 89 d1 <f3> a4 c3 48 81 fa a8 02 00 00 72 05 40 38 fe 74 3b 48 83 ea 20 48
[ 2766.628653][T26603] RSP: 0018:ffff888098f9fbd0 EFLAGS: 00010002
[ 2766.634717][T26603] RAX: ffffe8ffffc77b20 RBX: 000000000000008e RCX: 00000007ffe77cd0
[ 2766.642811][T26603] RDX: 00000007fffffd40 RSI: ffffe8ffffe00000 RDI: ffffe8ffffdffb90
[ 2766.650780][T26603] RBP: ffff888098f9fc38 R08: 1ffff11013f0b580 R09: ffffed1013f0b581
[ 2766.658762][T26603] R10: ffffed1013f0b580 R11: ffff88809f85ac03 R12: ffff8880a02fbd80
[ 2766.666740][T26603] R13: ffff8880960f4b80 R14: ffff888098f9fbf8 R15: ffffe8ffffc77b10
[ 2766.674709][T26603] FS:  0000000000b06940(0000) GS:ffff8880ae800000(0000) knlGS:0000000000000000
[ 2766.683629][T26603] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[ 2766.690203][T26603] CR2: ffffe8ffffe00000 CR3: 00000000993cf000 CR4: 00000000001406f0
[ 2766.698165][T26603] Call Trace:
[ 2766.701459][T26603]  ? ___cache_free+0x291/0x380
[ 2766.706218][T26603]  ? quarantine_reduce+0x169/0x1b0
[ 2766.711322][T26603]  qlist_free_all+0x85/0x150
[ 2766.715909][T26603]  quarantine_reduce+0x169/0x1b0
[ 2766.720873][T26603]  __kasan_kmalloc.constprop.0+0xa3/0xe0
[ 2766.726514][T26603]  kasan_slab_alloc+0xf/0x20
[ 2766.731099][T26603]  kmem_cache_alloc+0x11a/0x6f0
[ 2766.735948][T26603]  getname_flags+0xd6/0x5b0
[ 2766.740449][T26603]  user_path_mountpoint_at+0x29/0x50
[ 2766.745742][T26603]  ksys_umount+0x167/0xf00
[ 2766.750158][T26603]  ? __detach_mounts+0x320/0x320
[ 2766.755086][T26603]  ? kasan_check_write+0x14/0x20
[ 2766.760035][T26603]  ? trace_hardirqs_on_thunk+0x1a/0x1c
[ 2766.765492][T26603]  ? trace_hardirqs_on_thunk+0x1a/0x1c
[ 2766.770943][T26603]  ? do_syscall_64+0x26/0x610
[ 2766.781613][T26603]  ? entry_SYSCALL_64_after_hwframe+0x49/0xbe
[ 2766.791412][T26603]  ? do_syscall_64+0x26/0x610
[ 2766.796084][T26603]  ? lockdep_hardirqs_on+0x418/0x5d0
[ 2766.801368][T26603]  __x64_sys_umount+0x54/0x80
[ 2766.806041][T26603]  do_syscall_64+0x103/0x610
[ 2766.810646][T26603]  entry_SYSCALL_64_after_hwframe+0x49/0xbe
[ 2766.816531][T26603] RIP: 0033:0x45ac57
[ 2766.820419][T26603] Code: 44 00 00 b8 08 00 00 00 0f 05 48 3d 01 f0 ff ff 0f 83 4d 8e fb ff c3 66 2e 0f 1f 84 00 00 00 00 00 66 90 b8 a6 00 00 00 0f 05 <48> 3d 01 f0 ff ff 0f 83 2d 8e fb ff c3 66 2e 0f 1f 84 00 00 00 00
[ 2766.840036][T26603] RSP: 002b:00007ffffcdd04f8 EFLAGS: 00000246 ORIG_RAX: 00000000000000a6
[ 2766.848623][T26603] RAX: ffffffffffffffda RBX: 00000000002a36a8 RCX: 000000000045ac57
[ 2766.856594][T26603] RDX: 000000000000000c RSI: 0000000000000002 RDI: 00007ffffcdd1630
[ 2766.864580][T26603] RBP: 0000000000004771 R08: 0000000000000001 R09: 0000000000b06940
[ 2766.872547][T26603] R10: 0000000000000000 R11: 0000000000000246 R12: 00007ffffcdd1630
[ 2766.880596][T26603] R13: 00007ffffcdd1620 R14: 0000000000000000 R15: 00007ffffcdd1630
[ 2766.888577][T26603] Modules linked in:
[ 2766.892471][T26603] CR2: ffffe8ffffe00000
[ 2766.896630][T26603] ---[ end trace a09fada1be6227a0 ]---
[ 2766.896639][ T7815] BUG: unable to handle kernel paging request at ffffe9048f3cce38
[ 2766.896650][ T7815] #PF error: [normal kernel read fault]
[ 2766.902102][T26603] RIP: 0010:__memmove+0x24/0x1a0
[ 2766.909893][ T7815] PGD 0 P4D 0 
[ 2766.915432][T26603] Code: 90 90 90 90 90 90 48 89 f8 48 83 fa 20 0f 82 03 01 00 00 48 39 fe 7d 0f 49 89 f0 49 01 d0 49 39 f8 0f 8f 9f 00 00 00 48 89 d1 <f3> a4 c3 48 81 fa a8 02 00 00 72 05 40 38 fe 74 3b 48 83 ea 20 48
[ 2766.920351][ T7815] Oops: 0000 [#2] PREEMPT SMP KASAN
[ 2766.923739][T26603] RSP: 0018:ffff888098f9fbd0 EFLAGS: 00010002
[ 2766.943348][ T7815] CPU: 1 PID: 7815 Comm: syz-executor.5 Tainted: G      D           5.0.0+ #136
[ 2766.948528][T26603] RAX: ffffe8ffffc77b20 RBX: 000000000000008e RCX: 00000007ffe77cd0
[ 2766.954576][ T7815] Hardware name: Google Google Compute Engine/Google Compute Engine, BIOS Google 01/01/2011
[ 2766.963663][T26603] RDX: 00000007fffffd40 RSI: ffffe8ffffe00000 RDI: ffffe8ffffdffb90
[ 2766.971633][ T7815] RIP: 0010:kmem_cache_alloc+0x1c9/0x6f0
[ 2766.981661][T26603] RBP: ffff888098f9fc38 R08: 1ffff11013f0b580 R09: ffffed1013f0b581
[ 2766.989629][ T7815] Code: 7d 00 e8 ba db 88 01 89 c0 4c 03 3c c5 60 a0 6c 88 41 8b 17 85 d2 0f 84 98 01 00 00 83 ea 01 41 c7 47 0c 01 00 00 00 41 89 17 <4d> 8b 7c d7 10 4d 85 ff 0f 85 f2 fe ff ff 65 8b 15 5a 8d 5a 7e 89
[ 2766.995239][T26603] R10: ffffed1013f0b580 R11: ffff88809f85ac03 R12: ffff8880a02fbd80
[ 2767.003200][ T7815] RSP: 0018:ffff88806b61fd18 EFLAGS: 00010092
[ 2767.022796][T26603] R13: ffff8880960f4b80 R14: ffff888098f9fbf8 R15: ffffe8ffffc77b10
[ 2767.030753][ T7815] RAX: 0000000000000001 RBX: 0000000000000cc0 RCX: ffffffff8330d4c8
[ 2767.036811][T26603] FS:  0000000000b06940(0000) GS:ffff8880ae800000(0000) knlGS:0000000000000000
[ 2767.044766][ T7815] RDX: 0000000091ed90bf RSI: ffffffff8330d46c RDI: 0000000000000007
[ 2767.052731][T26603] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[ 2767.061650][ T7815] RBP: ffff88806b61fd80 R08: ffff88806b610100 R09: 0000000000000000
[ 2767.069622][T26603] CR2: ffffe8ffffe00000 CR3: 00000000993cf000 CR4: 00000000001406f0
[ 2767.076196][ T7815] R10: ffffed100d6c3f92 R11: ffff88806b610100 R12: ffff88812c2d8dc0
[ 2767.084150][T26603] Kernel panic - not syncing: Fatal exception
[ 2767.092114][ T7815] R13: ffff88812c2d8dc0 R14: 0000000000000cc0 R15: ffffe8ffffd04830
[ 2767.114073][ T7815] FS:  00000000018fa940(0000) GS:ffff8880ae900000(0000) knlGS:0000000000000000
[ 2767.123081][ T7815] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[ 2767.129654][ T7815] CR2: ffffe9048f3cce38 CR3: 000000006b5ec000 CR4: 00000000001406e0
[ 2767.137615][ T7815] Call Trace:
[ 2767.140905][ T7815]  ? apparmor_capable+0x2ed/0x630
[ 2767.145924][ T7815]  ? cap_capable+0x205/0x270
[ 2767.150514][ T7815]  getname_flags+0xd6/0x5b0
[ 2767.155019][ T7815]  user_path_mountpoint_at+0x29/0x50
[ 2767.160318][ T7815]  ksys_umount+0x167/0xf00
[ 2767.164732][ T7815]  ? trace_hardirqs_on+0x67/0x230
[ 2767.169754][ T7815]  ? __detach_mounts+0x320/0x320
[ 2767.174692][ T7815]  ? kasan_check_write+0x14/0x20
[ 2767.179621][ T7815]  ? up_read+0x131/0x180
[ 2767.183862][ T7815]  ? __sanitizer_cov_trace_const_cmp4+0x16/0x20
[ 2767.190103][ T7815]  ? entry_SYSCALL_64_after_hwframe+0x3e/0xbe
[ 2767.196167][ T7815]  ? trace_hardirqs_off_caller+0x65/0x220
[ 2767.201880][ T7815]  __x64_sys_umount+0x54/0x80
[ 2767.206556][ T7815]  do_syscall_64+0x103/0x610
[ 2767.211145][ T7815]  entry_SYSCALL_64_after_hwframe+0x49/0xbe
[ 2767.217047][ T7815] RIP: 0033:0x45ac57
[ 2767.220936][ T7815] Code: 44 00 00 b8 08 00 00 00 0f 05 48 3d 01 f0 ff ff 0f 83 4d 8e fb ff c3 66 2e 0f 1f 84 00 00 00 00 00 66 90 b8 a6 00 00 00 0f 05 <48> 3d 01 f0 ff ff 0f 83 2d 8e fb ff c3 66 2e 0f 1f 84 00 00 00 00
[ 2767.240539][ T7815] RSP: 002b:00007fff4b8503c8 EFLAGS: 00000246 ORIG_RAX: 00000000000000a6
[ 2767.248949][ T7815] RAX: ffffffffffffffda RBX: 00000000002a363e RCX: 000000000045ac57
[ 2767.256919][ T7815] RDX: 000000000000000c RSI: 0000000000000002 RDI: 00007fff4b851500
[ 2767.264890][ T7815] RBP: 0000000000004721 R08: 0000000000000001 R09: 00000000018fa940
[ 2767.272859][ T7815] R10: 0000000000000000 R11: 0000000000000246 R12: 00007fff4b851500
[ 2767.280824][ T7815] R13: 00007fff4b8514f0 R14: 0000000000000000 R15: 00007fff4b851500
[ 2767.288803][ T7815] Modules linked in:
[ 2767.292690][ T7815] CR2: ffffe9048f3cce38
[ 2767.296837][ T7815] ---[ end trace a09fada1be6227a1 ]---
[ 2767.302302][ T7815] RIP: 0010:__memmove+0x24/0x1a0
[ 2767.307234][ T7815] Code: 90 90 90 90 90 90 48 89 f8 48 83 fa 20 0f 82 03 01 00 00 48 39 fe 7d 0f 49 89 f0 49 01 d0 49 39 f8 0f 8f 9f 00 00 00 48 89 d1 <f3> a4 c3 48 81 fa a8 02 00 00 72 05 40 38 fe 74 3b 48 83 ea 20 48
[ 2767.326841][ T7815] RSP: 0018:ffff888098f9fbd0 EFLAGS: 00010002
[ 2767.332906][ T7815] RAX: ffffe8ffffc77b20 RBX: 000000000000008e RCX: 00000007ffe77cd0
[ 2767.340877][ T7815] RDX: 00000007fffffd40 RSI: ffffe8ffffe00000 RDI: ffffe8ffffdffb90
[ 2767.348841][ T7815] RBP: ffff888098f9fc38 R08: 1ffff11013f0b580 R09: ffffed1013f0b581
[ 2767.356811][ T7815] R10: ffffed1013f0b580 R11: ffff88809f85ac03 R12: ffff8880a02fbd80
[ 2767.364803][ T7815] R13: ffff8880960f4b80 R14: ffff888098f9fbf8 R15: ffffe8ffffc77b10
[ 2767.373295][ T7815] FS:  00000000018fa940(0000) GS:ffff8880ae900000(0000) knlGS:0000000000000000
[ 2767.382218][ T7815] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[ 2767.388800][ T7815] CR2: ffffe9048f3cce38 CR3: 000000006b5ec000 CR4: 00000000001406e0
[ 2768.244000][T26603] Shutting down cpus with NMI
[ 2768.249498][T26603] Kernel Offset: disabled
[ 2768.253821][T26603] Rebooting in 86400 seconds..
