TITLE: general protection fault in fq_reset
ALT: bad-access in fq_reset

[ 1503.551672][T10069] general protection fault, probably for non-canonical address 0xdffffc000eeeeef0: 0000 [#1] PREEMPT SMP KASAN
[ 1503.563429][T10069] KASAN: probably user-memory-access in range [0x0000000077777780-0x0000000077777787]
[ 1503.572988][T10069] CPU: 1 PID: 10069 Comm: syz-executor.5 Not tainted 5.9.0-rc3-next-20200903-syzkaller #0
[ 1503.582895][T10069] Hardware name: Google Google Compute Engine/Google Compute Engine, BIOS Google 01/01/2011
[ 1503.593220][T10069] RIP: 0010:rb_first+0x3e/0x80
[ 1503.598026][T10069] Code: ec 08 80 3c 02 00 75 46 48 bb 00 00 00 00 00 fc ff df 48 8b 07 48 85 c0 75 05 eb 1d 48 89 d0 48 8d 78 10 48 89 fa 48 c1 ea 03 <80> 3c 1a 00 75 0f 48 8b 50 10 48 85 d2 75 e3 48 83 c4 08 5b c3 48
[ 1503.617646][T10069] RSP: 0018:ffffc900088ef2a8 EFLAGS: 00010207
[ 1503.623740][T10069] RAX: 0000000077777777 RBX: dffffc0000000000 RCX: ffffc90014116000
[ 1503.631753][T10069] RDX: 000000000eeeeef0 RSI: ffffffff866ff2e6 RDI: 0000000077777787
[ 1503.639730][T10069] RBP: 0000000000000400 R08: 0000000000000000 R09: ffffffff8abcb60f
[ 1503.647714][T10069] R10: 000000000000004f R11: 0000000000000001 R12: 000000000000004f
[ 1503.655692][T10069] R13: ffff8880a4383000 R14: ffff8880a43833b9 R15: 0000000000000000
[ 1503.663680][T10069] FS:  00007f3dccabe700(0000) GS:ffff8880ae700000(0000) knlGS:0000000000000000
[ 1503.672708][T10069] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
[ 1503.679305][T10069] CR2: 00000000004e0e70 CR3: 00000002174c6000 CR4: 00000000001526e0
[ 1503.687315][T10069] DR0: 0000000000000000 DR1: 0000000000000000 DR2: 0000000000000000
[ 1503.695318][T10069] DR3: 0000000000000000 DR6: 00000000fffe0ff0 DR7: 0000000000000400
[ 1503.703290][T10069] Call Trace:
[ 1503.711386][T10069]  fq_reset+0x18e/0x3d0
[ 1503.720291][T10069]  qdisc_reset+0xd9/0x790
[ 1503.724627][T10069]  dev_deactivate_queue+0x1a0/0x270
[ 1503.729882][T10069]  dev_deactivate_many+0xec/0x950
[ 1503.734924][T10069]  dev_deactivate+0xef/0x1c0
[ 1503.744882][T10069]  qdisc_graft+0xdc1/0x1240
[ 1503.768191][T10069]  tc_modify_qdisc+0xb4b/0x1990
[ 1503.792947][T10069]  rtnetlink_rcv_msg+0x44e/0xad0
[ 1503.813399][T10069]  netlink_rcv_skb+0x15a/0x430
[ 1503.828256][T10069]  netlink_unicast+0x533/0x7d0
[ 1503.858420][T10069]  netlink_sendmsg+0x856/0xd90
[ 1503.878458][T10069]  sock_sendmsg+0xcf/0x120
[ 1503.882912][T10069]  ____sys_sendmsg+0x6e8/0x810
[ 1503.902997][T10069]  ___sys_sendmsg+0xf3/0x170
[ 1503.936522][T10069]  __sys_sendmsg+0xe5/0x1b0
[ 1503.957279][T10069]  do_syscall_64+0x2d/0x70
[ 1503.961700][T10069]  entry_SYSCALL_64_after_hwframe+0x44/0xa9
[ 1503.967592][T10069] RIP: 0033:0x45d5b9
[ 1503.971509][T10069] Code: 5d b4 fb ff c3 66 2e 0f 1f 84 00 00 00 00 00 66 90 48 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d 01 f0 ff ff 0f 83 2b b4 fb ff c3 66 2e 0f 1f 84 00 00 00 00
[ 1503.991124][T10069] RSP: 002b:00007f3dccabdc78 EFLAGS: 00000246 ORIG_RAX: 000000000000002e
[ 1503.999546][T10069] RAX: ffffffffffffffda RBX: 000000000002cec0 RCX: 000000000045d5b9
[ 1504.007523][T10069] RDX: 0000000000000000 RSI: 0000000020000380 RDI: 0000000000000005
[ 1504.015504][T10069] RBP: 000000000118cf80 R08: 0000000000000000 R09: 0000000000000000
[ 1504.023491][T10069] R10: 0000000000000000 R11: 0000000000000246 R12: 000000000118cf4c
[ 1504.031481][T10069] R13: 00007ffc5fdefb8f R14: 00007f3dccabe9c0 R15: 000000000118cf4c
[ 1504.039472][T10069] Modules linked in:
[ 1504.043524][T10069] ---[ end trace f9b9302ffd13ee75 ]---
