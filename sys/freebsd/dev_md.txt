# Copyright 2021 syzkaller project authors. All rights reserved.
# Use of this source code is governed by Apache 2 LICENSE that can be found in the LICENSE file.
# Autogenerated by sys2syz

include <sys/types.h>
include <ioccom.h>
include <mdioctl.h>
include <fcntl.h>

resource fd_md[fd]

openat$md(fd const[AT_FDCWD], file ptr[in, string["/dev/mdctl"]], flags flags[open_flags], mode const[0]) fd_md

ioctl$MDIOCATTACH(fd fd_md, cmd const[MDIOCATTACH], arg ptr[inout, md_ioctl])
ioctl$MDIOCDETACH(fd fd_md, cmd const[MDIOCDETACH], arg ptr[inout, md_ioctl])
ioctl$MDIOCQUERY(fd fd_md, cmd const[MDIOCQUERY], arg ptr[inout, md_ioctl])
ioctl$MDIOCRESIZE(fd fd_md, cmd const[MDIOCRESIZE], arg ptr[inout, md_ioctl])

md_ioctl {
	md_version	int32
	md_unit		int32
	md_type		flags[md_types_flags, int32]
	md_file		ptr[in, filename]
	md_mediasize	int64
	md_sectorsize	int32
	md_options	int32
	md_base		int64
	md_fwheads	int32
	md_fwsectors	int32
	md_label	ptr[in, string]
	md_pad		array[int32, 96]
}

md_types_flags = MD_MALLOC, MD_PRELOAD, MD_VNODE, MD_SWAP, MD_NULL
